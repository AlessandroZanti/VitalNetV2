<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="/images/vitalnet-logo.svg" />
    <script src="./js/highcharts.min.js"></script>
    <link rel="stylesheet" href="./css/index.min.css" />
    <title>Información Boya - VitalNet</title>
  </head>
  <body>
    <main class="site-content">
      <div class="d-flex flex-wrap information-page">
        <aside class="information-sidebar">
          <div class="information-sidebar__logo">
            <a href="/">
              <img
                alt="VitalNet logo"
                src="/images/vitalnet-logo.svg"
                height="60px"
              />
            </a>
          </div>
          <!-- El contenido del sidebar se implementará de forma automatica dentro de este elemento. -->
          <div
            id="sidebar-menu-content"
            class="information-sidebar__menu"
          ></div>
        </aside>

        <button type="button" class="information-sidebar__toggle">
          <img
            src="/images/arrow-right.svg"
            alt="Arrow Right/Left Icon"
            height="30"
            width="30"
          />
        </button>

        <div class="information-content">
          <div class="information-content__single">
            <div id="circle_element" style="width: 100%; height: 400px"></div>
            <script>
              Highcharts.chart("circle_element", {
                chart: {
                  type: "pie",
                },
                title: {
                  text: "Composición del gua",
                },
                tooltip: {
                  valueSuffix: "%",
                },
                subtitle: {
                  text: "Estado actual de las medidas obtenidas.",
                },
                plotOptions: {
                  series: {
                    allowPointSelect: true,
                    cursor: "pointer",
                    dataLabels: [
                      {
                        enabled: true,
                        distance: 20,
                      },
                      {
                        enabled: true,
                        distance: -40,
                        format: "{point.percentage:.1f}%",
                        style: {
                          fontSize: "1.2em",
                          textOutline: "none",
                          opacity: 0.7,
                        },
                        filter: {
                          operator: ">",
                          property: "percentage",
                          value: 10,
                        },
                      },
                    ],
                  },
                },
                series: [
                  {
                    name: "Percentage",
                    colorByPoint: true,
                    data: [
                      {
                        name: "Water",
                        y: 55.02,
                      },
                      {
                        name: "Fat",
                        sliced: true,
                        selected: true,
                        y: 26.71,
                      },
                      {
                        name: "Carbohydrates",
                        y: 1.09,
                      },
                      {
                        name: "Protein",
                        y: 15.5,
                      },
                      {
                        name: "Ash",
                        y: 1.68,
                      },
                    ],
                  },
                ],
              });
            </script>
          </div>
        </div>

        <div class="information-content">
          <div class="information-content__single">
            <div id="random_values" style="width: 100%; height: 400px"></div>
            <script>
              // On chart load, start an interval that adds points to the chart and animate
              // the pulsating marker.
              const onChartLoad = function () {
                const chart = this,
                  series = chart.series[0];

                setInterval(function () {
                  const x = new Date().getTime(), // current time
                    y = Math.random();

                  series.addPoint([x, y], true, true);
                }, 1000);
              };

              // Create the initial data
              const data = (function () {
                const data = [];
                const time = new Date().getTime();

                for (let i = -19; i <= 0; i += 1) {
                  data.push({
                    x: time + i * 1000,
                    y: Math.random(),
                  });
                }
                return data;
              })();

              // Plugin to add a pulsating marker on add point
              Highcharts.addEvent(Highcharts.Series, "addPoint", (e) => {
                const point = e.point,
                  series = e.target;

                if (!series.pulse) {
                  series.pulse = series.chart.renderer
                    .circle()
                    .add(series.markerGroup);
                }

                setTimeout(() => {
                  series.pulse
                    .attr({
                      x: series.xAxis.toPixels(point.x, true),
                      y: series.yAxis.toPixels(point.y, true),
                      r: series.options.marker.radius,
                      opacity: 1,
                      fill: series.color,
                    })
                    .animate(
                      {
                        r: 20,
                        opacity: 0,
                      },
                      {
                        duration: 1000,
                      }
                    );
                }, 1);
              });

              Highcharts.chart("random_values", {
                chart: {
                  type: "spline",
                  events: {
                    load: onChartLoad,
                  },
                },

                time: {
                  useUTC: false,
                },

                title: {
                  text: "Live random data",
                },

                accessibility: {
                  announceNewData: {
                    enabled: true,
                    minAnnounceInterval: 15000,
                    announcementFormatter: function (
                      allSeries,
                      newSeries,
                      newPoint
                    ) {
                      if (newPoint) {
                        return "New point added. Value: " + newPoint.y;
                      }
                      return false;
                    },
                  },
                },

                xAxis: {
                  type: "datetime",
                  tickPixelInterval: 150,
                  maxPadding: 0.1,
                },

                yAxis: {
                  title: {
                    text: "Value",
                  },
                  plotLines: [
                    {
                      value: 0,
                      width: 1,
                      color: "#808080",
                    },
                  ],
                },

                tooltip: {
                  headerFormat: "<b>{series.name}</b><br/>",
                  pointFormat: "{point.x:%Y-%m-%d %H:%M:%S}<br/>{point.y:.2f}",
                },

                legend: {
                  enabled: false,
                },

                exporting: {
                  enabled: false,
                },

                series: [
                  {
                    name: "Random data",
                    lineWidth: 2,
                    color: Highcharts.getOptions().colors[2],
                    data,
                  },
                ],
              });
            </script>
          </div>
        </div>
      </div>
    </main>

    <script src="./js/script.js"></script>
  </body>
</html>
